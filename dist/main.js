(()=>{const e=document.querySelector(".addt"),t=document.querySelector(".add"),n=document.querySelector(".side > div > div"),s=(document.querySelector(".tasks"),document.querySelector(".tasks > div")),d=document.querySelector(".tab"),i=document.querySelector(".Inbox");let o="Inbox",l=[];function c(e,t,n,s,d,i){this.index=e,this.task=t,this.description=n,this.priority=s,this.sub_tasks=d,this.dead_line=i}function r(){let e=document.createElement("div");const t=document.querySelector("."+o);e.innerHTML='<div class="task">\n        <div>\n            <input class="subj" type=\'text\'>\n            <div>\n            <label for="priority">priority: </label>\n                <select name="priority" class="prio">\n                    <option>high</option>\n                    <option>medium</option>\n                    <option>low</option>\n                </select>\n                <div>\n                    <input class="dead" type=\'date\'>\n                </div>\n            </div>\n        </div>\n        <div class="btns">\n            <button class="addd">+ Add Description</button>\n            <button class="adds">+ Add Sub Task</button>\n            <button class="done">Done</button>\n        </div>\n    </div>',t.appendChild(e);const n=e.querySelector(".addd"),s=e.querySelector(".adds"),d=e.querySelector(".done");n.addEventListener("click",(()=>a(n)),{once:!0}),s.addEventListener("click",(()=>function(e){let t=document.createElement("div");t.classList.add("sub"),t.innerHTML='<div>\n    <label for="sub"><input type="text" class="subt"></label>\n    </div>\n    <img src="icons/delete.svg">',e.before(t)}(s))),d.addEventListener("click",(()=>function(e,t){const n=t.querySelector(".subj"),s=t.querySelector(".prio"),d=t.querySelector(".des"),i=t.querySelectorAll(".subt"),o=t.querySelector(".dead");let r=[],a="",u=document.createElement("div");void 0!==d&&null!=d&&(a=d.value),void 0!==i&&null!=i&&i.forEach((e=>{r.push(e.value)}));let v,p=o.value.split("-");v=void 0===p[0]||void 0===p[1]||void 0===p[2]?"":p[2]+"/"+p[1]+"/"+p[0];let y=new c(l.length,n.value,a,s.value,v);l.push([y,t]),t.innerHTML=`<div class="task">\n        <div>\n            <div>\n                <input type="checkbox" name="task" class="check">\n                <label for="task"> ${y.task} </label>\n            </div>\n            <div>\n                <div>\n                    <p>${v}</p>\n                </div>\n                <img src="icons/chevron-down.svg" class="expand">\n                <img src="icons/pencil.svg">\n                <img src="icons/delete.svg" class="remtask">\n            </div>\n        </div>\n        <div class="btns">\n            <div class="des"> ${y.description} </div>\n        </div>\n    </div>`,""==y.description&&(t.querySelector(".des").style.margin="0px"),"low"==y.priority?t.querySelector(".task").style="border-left: 10px solid green;":"medium"==y.priority?t.querySelector(".task").style="border-left: 10px solid yellow;":t.querySelector(".task").style="border-left: 10px solid red;";for(let e=0;e<r.length;e++){if(""==r[e])continue;let t=document.createElement("div");t.innerHTML=`<div>\n        <input type="checkbox" name="sub">\n        <label for="sub"> ${r[e]} </label>\n        </div>\n        <img src="icons/delete.svg" class=""remsub>`,t.classList.add("sub"),u.appendChild(t)}const m=t.querySelector(".btns"),b=t.querySelector(".remtask"),h=t.querySelector(".expand");b.addEventListener("mousedown",(()=>function(e){for(let t=e.index+1;t<l.length;t++)l[t][0].index--;l[e.index][1].remove(),l.splice(e.index,1),console.log(l)}(y))),h.addEventListener("mousedown",(()=>function(e,t){const n=t.querySelector(".btns");"none"==n.style.display?(n.style.display="block",e.src="icons/chevron-up.svg"):(n.style.display="none",e.src="icons/chevron-down.svg")}(h,t))),m.style.display="none",m.appendChild(u),e.appendChild(t)}(t,e)))}function a(e){let t=document.createElement("textarea");t.classList.add("des"),e.before(t),e.textContent="- Remove Description",e.addEventListener("click",(()=>function(e,t){t.remove(),e.textContent="+ Add Description",e.addEventListener("click",(()=>a(e)),{once:!0})}(e,t)),{once:!0})}function u(e,t){const n=document.querySelectorAll(".tab"),s=document.querySelectorAll(".holder");n.forEach((e=>{e.classList.remove("selected")})),"Inbox"==e.textContent?(s.forEach((e=>{e.style.display="grid"})),e.classList.add("selected"),o=e.textContent):(s.forEach((e=>{e.style.display="none"})),t.style.display="grid",e.classList.add("selected"),o=e.textContent)}d.addEventListener("click",(()=>u(d,i))),e.addEventListener("click",(()=>function(){let e=document.createElement("button"),t=document.createElement("div"),d=prompt("tab name:");e.classList.add("tab"),e.textContent=d,t.classList.add("holder"),t.classList.add(d),e.addEventListener("click",(()=>u(e,t))),n.appendChild(e),s.appendChild(t)}())),t.addEventListener("click",(()=>r()))})();