(()=>{const e=document.querySelector(".addt"),n=document.querySelector(".add"),t=document.querySelector(".side > div > div"),i=document.querySelector(".tasks > div");let d=[];function s(e,n,t,i,d,s){this.index=e,this.task=n,this.description=t,this.priority=i,this.sub_tasks=d,this.dead_line=s}function o(){let e=document.createElement("div");e.innerHTML='<div class="task">\n        <div>\n            <input class="subj" type=\'text\'>\n            <div>\n            <label for="priority">priority: </label>\n                <select name="priority" class="prio">\n                    <option>high</option>\n                    <option>medium</option>\n                    <option>low</option>\n                </select>\n                <div>\n                    <input class="dead" type=\'date\'>\n                </div>\n            </div>\n        </div>\n        <div class="btns">\n            <button class="addd">+ Add Description</button>\n            <button class="adds">+ Add Sub Task</button>\n            <button class="done">Done</button>\n        </div>\n    </div>',i.appendChild(e);const n=e.querySelector(".addd"),t=e.querySelector(".adds"),o=e.querySelector(".done");n.addEventListener("click",(()=>c(n)),{once:!0}),t.addEventListener("click",(()=>function(e){let n=document.createElement("div");n.classList.add("sub"),n.innerHTML='<div>\n    <input type="checkbox" name="sub">\n    <label for="sub"><input type="text" class="subt"></label>\n    </div>\n    <img src="icons/delete.svg">',e.before(n)}(t))),o.addEventListener("click",(()=>function(e){const n=e.querySelector(".subj"),t=e.querySelector(".des"),o=e.querySelectorAll(".subt"),c=e.querySelector(".dead");let l=[],r="",a=document.createElement("div");void 0!==t&&null!=t&&(r=t.value),void 0!==o&&null!=o&&o.forEach((e=>{l.push(e.value)}));let u,v=c.value.split("-");u=void 0===v[0]||void 0===v[1]||void 0===v[2]?"":v[0]+"/"+v[1]+"/"+v[2];let p=new s(d.length,n.value,r,"low",u);d.push([p,e]),e.innerHTML=`<div class="task">\n        <div>\n            <p> ${p.task} </p>\n            <div>\n                <div>\n                    <p>${u}</p>\n                </div>\n                <img src="icons/chevron-down.svg">\n                <img src="icons/pencil.svg">\n                <img src="icons/delete.svg" class="remtask">\n            </div>\n        </div>\n        <div class="btns">\n            <div class="des"> ${p.description} </div>\n        </div>\n    </div>`;for(let e=0;e<l.length;e++){let n=document.createElement("div");n.innerHTML=`<div>\n        <input type="checkbox" name="sub">\n        <label for="sub"> ${l[e]} </label>\n        </div>\n        <img src="icons/delete.svg" class=""remsub>`,n.classList.add("sub"),a.appendChild(n)}const b=e.querySelector(".btns");e.querySelector(".remtask").addEventListener("mousedown",(()=>function(e){for(let n=e.index+1;n<d.length;n++)d[n][0].index--;d[e.index][1].remove(),d.splice(e.index,1),console.log(d)}(p))),b.appendChild(a),i.appendChild(e),console.log(d)}(e)))}function c(e){let n=document.createElement("textarea");n.classList.add("des"),e.before(n),e.textContent="- Remove Description",e.addEventListener("click",(()=>function(e,n){n.remove(),e.textContent="+ Add Description",e.addEventListener("click",(()=>c(e)),{once:!0})}(e,n)),{once:!0})}e.addEventListener("click",(()=>function(){let e=document.createElement("button");e.classList.add("tab"),e.innerHTML="<input type='text'>",t.appendChild(e)}())),n.addEventListener("click",(()=>o()))})();